"use strict";(self.webpackChunklighthouse_web=self.webpackChunklighthouse_web||[]).push([[61],{77046:function(G,m,r){r.r(m);var M=r(5574),P=r.n(M),v=r(67294),x=r(66309),f=r(98081),Z=r(30699),l=r(6226),i=r(4393),d=r(53531),j=r(40056),p=r(74330),C=r(92783),B=r(54122),L=r(50888),A=r(68790),T=r(12021),e=r(85893),_={global:"\u5168\u57DF",domain:"\u57DF",service:"\u670D\u52A1",pod:"Pod"},y=function(){var h=(0,T.q)(),s=h.sloStatus,I=h.loadingSLO,g=h.errorSLO,D=h.fetchSLOStatus,R=h.useMockData,K=(0,v.useState)("service"),O=P()(K,2),o=O[0],S=O[1];(0,v.useEffect)(function(){D(o)},[o,D]);var U=function(t){switch(t){case"healthy":return(0,e.jsx)(x.Z,{color:"success",children:"\u5065\u5EB7"});case"warning":return(0,e.jsx)(x.Z,{color:"warning",children:"\u8B66\u544A"});case"critical":return(0,e.jsx)(x.Z,{color:"error",children:"\u4E25\u91CD"});default:return(0,e.jsx)(x.Z,{children:"\u672A\u77E5"})}},W=[{title:"\u540D\u79F0",key:"name",render:function(t,n){var c;return(0,e.jsx)("strong",{children:(c=n.scopeName)!==null&&c!==void 0?c:n.serviceName})}},{title:"\u5065\u5EB7\u72B6\u6001",dataIndex:"status",key:"status",render:function(t){return(0,e.jsxs)(f.Z,{children:[(0,e.jsx)(A.Z,{status:t,showText:!0}),U(t)]})}},{title:"\u53EF\u7528\u6027 (%)",dataIndex:"uptime",key:"uptime",render:function(t){return"".concat(t.toFixed(2),"%")},sorter:function(t,n){return t.uptime-n.uptime}},{title:"\u54CD\u5E94\u65F6\u95F4 (ms)",dataIndex:"responseTime",key:"responseTime",render:function(t){return t},sorter:function(t,n){return t.responseTime-n.responseTime}},{title:"\u9519\u8BEF\u7387 (%)",dataIndex:"errorRate",key:"errorRate",render:function(t){return"".concat(t.toFixed(2),"%")},sorter:function(t,n){return t.errorRate-n.errorRate}}],F=function(t){return t==="global"?"domain":t==="domain"?"service":t==="service"?"pod":null},b=function(){if(!s||s.length===0)return null;var t=s.length,n=s.filter(function(a){return a.status==="healthy"}).length,c=s.filter(function(a){return a.status==="warning"}).length,w=s.filter(function(a){return a.status==="critical"}).length,N=s.reduce(function(a,E){return a+E.uptime},0)/t,z=s.reduce(function(a,E){return a+E.responseTime},0)/t,$=s.reduce(function(a,E){return a+E.errorRate},0)/t;return(0,e.jsxs)(Z.Z,{gutter:[16,16],style:{marginBottom:16},children:[(0,e.jsx)(l.Z,{xs:24,sm:12,md:6,children:(0,e.jsx)(i.Z,{children:(0,e.jsx)(d.Z,{title:"\u603B".concat(_[o],"\u6570"),value:t})})}),(0,e.jsx)(l.Z,{xs:24,sm:12,md:6,children:(0,e.jsx)(i.Z,{children:(0,e.jsx)(d.Z,{title:"\u5065\u5EB7".concat(_[o]),value:n,valueStyle:{color:"#52c41a"}})})}),(0,e.jsx)(l.Z,{xs:24,sm:12,md:6,children:(0,e.jsx)(i.Z,{children:(0,e.jsx)(d.Z,{title:"\u8B66\u544A".concat(_[o]),value:c,valueStyle:{color:"#faad14"}})})}),(0,e.jsx)(l.Z,{xs:24,sm:12,md:6,children:(0,e.jsx)(i.Z,{children:(0,e.jsx)(d.Z,{title:"\u4E25\u91CD".concat(_[o]),value:w,valueStyle:{color:"#ff4d4f"}})})}),(0,e.jsx)(l.Z,{xs:24,sm:12,md:6,children:(0,e.jsx)(i.Z,{children:(0,e.jsx)(d.Z,{title:"\u5E73\u5747\u53EF\u7528\u6027",value:N.toFixed(2),suffix:"%"})})}),(0,e.jsx)(l.Z,{xs:24,sm:12,md:6,children:(0,e.jsx)(i.Z,{children:(0,e.jsx)(d.Z,{title:"\u5E73\u5747\u54CD\u5E94\u65F6\u95F4",value:Math.round(z),suffix:"ms"})})}),(0,e.jsx)(l.Z,{xs:24,sm:12,md:6,children:(0,e.jsx)(i.Z,{children:(0,e.jsx)(d.Z,{title:"\u5E73\u5747\u9519\u8BEF\u7387",value:$.toFixed(2),suffix:"%"})})})]})};return(0,e.jsxs)("div",{children:[(0,e.jsx)("h2",{children:"SLO\u5065\u5EB7\u76D1\u63A7"}),R&&(0,e.jsx)(j.Z,{message:"\u5F53\u524D\u4F7F\u7528Mock\u6570\u636E",type:"info",style:{marginBottom:16}}),I?(0,e.jsxs)("div",{style:{textAlign:"center",padding:"40px"},children:[(0,e.jsx)(p.Z,{indicator:(0,e.jsx)(L.Z,{spin:!0})}),(0,e.jsx)("p",{children:"\u52A0\u8F7DSLO\u72B6\u6001\u4E2D..."})]}):g?(0,e.jsx)(j.Z,{message:"\u52A0\u8F7DSLO\u72B6\u6001\u5931\u8D25",description:g,type:"error",showIcon:!0,style:{marginBottom:16}}):(0,e.jsxs)(e.Fragment,{children:[(0,e.jsx)("div",{style:{marginBottom:16},children:(0,e.jsxs)(f.Z,{align:"center",children:[(0,e.jsx)("span",{children:"\u5C42\u7EA7\uFF1A"}),(0,e.jsx)(C.Z,{value:o,onChange:function(t){return S(t)},options:[{label:"\u5168\u57DF",value:"global"},{label:"\u57DF",value:"domain"},{label:"\u670D\u52A1",value:"service"},{label:"Pod",value:"pod"}]})]})}),b(),(0,e.jsx)(i.Z,{title:"".concat(_[o]," SLO \u8BE6\u60C5"),children:s!=null&&s.length?(0,e.jsx)(B.Z,{dataSource:s,columns:W,rowKey:function(t){var n;return(n=t.scopeId)!==null&&n!==void 0?n:t.serviceName},onRow:function(t){var n=F(o);return{style:n?{cursor:"pointer"}:void 0,onClick:function(){return n&&S(n)}}},pagination:{pageSize:10,showSizeChanger:!0,pageSizeOptions:["10","20","50"]}}):(0,e.jsx)("div",{style:{textAlign:"center",padding:"20px"},children:"\u6682\u65E0SLO\u6570\u636E"})})]})]})};m.default=y}}]);
