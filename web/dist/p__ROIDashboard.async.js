"use strict";(self.webpackChunklighthouse_web=self.webpackChunklighthouse_web||[]).push([[50],{14408:function(Y,p,e){e.r(p),e.d(p,{default:function(){return P}});var I=e(67294),A=e(75214),S=e(30699),v=e(6226),l=e(4393),g=e(53531),B=e(68753),Z=e(74330),R=e(50888),O=e(29009),T=e(98687),L=e(14195),K=e(3023),E=e(75358),z=e(26050),M=e(33558),j=e(56880),t=e(85893),N=function(o){var a=o.data,h=o.height,f=h===void 0?300:h,u=o.showEfficiency,d=u===void 0?!0:u,D=function(r){var n=new Date(r);return n.toLocaleDateString("zh-CN",{month:"short",day:"numeric"})},F=function(r){var n=r.active,i=r.payload;if(n&&i&&i.length){var s=i[0].payload;return(0,t.jsxs)("div",{style:{backgroundColor:"white",padding:"10px",border:"1px solid #ccc",borderRadius:"4px"},children:[(0,t.jsx)("p",{children:(0,t.jsxs)("strong",{children:["\u65E5\u671F: ",s.date]})}),(0,t.jsxs)("p",{children:["\u4EF7\u503C: \xA5",s.value.toLocaleString()]}),(0,t.jsxs)("p",{children:["\u6210\u672C: \xA5",s.cost.toLocaleString()]}),d&&(0,t.jsxs)("p",{children:["\u6548\u7387: ",s.efficiency,"%"]})]})}return null};return(0,t.jsx)("div",{style:{width:"100%",height:f},children:(0,t.jsx)(O.h,{width:"100%",height:"100%",children:(0,t.jsxs)(T.w,{data:a,margin:{top:5,right:30,left:20,bottom:5},children:[(0,t.jsx)(L.q,{strokeDasharray:"3 3"}),(0,t.jsx)(K.K,{dataKey:"date",tickFormatter:D,angle:-45,textAnchor:"end",height:60}),(0,t.jsx)(E.B,{yAxisId:"left",tickFormatter:function(r){return"\xA5".concat(r.toLocaleString())}}),d&&(0,t.jsx)(E.B,{yAxisId:"right",orientation:"right",domain:[0,100],tickFormatter:function(r){return"".concat(r,"%")}}),(0,t.jsx)(z.u,{content:(0,t.jsx)(F,{})}),(0,t.jsx)(M.D,{}),(0,t.jsx)(j.x,{yAxisId:"left",type:"monotone",dataKey:"value",name:"\u4EF7\u503C",stroke:"#52c41a",strokeWidth:2,dot:{r:4},activeDot:{r:6}}),(0,t.jsx)(j.x,{yAxisId:"left",type:"monotone",dataKey:"cost",name:"\u6210\u672C",stroke:"#faad14",strokeWidth:2,dot:{r:4},activeDot:{r:6}}),d&&(0,t.jsx)(j.x,{yAxisId:"right",type:"monotone",dataKey:"efficiency",name:"\u6548\u7387",stroke:"#1890ff",strokeWidth:2,dot:{r:4},activeDot:{r:6}})]})})})},y=N,W=e(12021),m=A.Z.TabPane,X=function(){var o=(0,W.q)(),a=o.roiTrends,h=o.loadingROI,f=o.errorROI,u=o.fetchROITrends,d=o.useMockData;(0,I.useEffect)(function(){u()},[u]);var D=function(){if(!a||a.length===0)return null;var r=a[a.length-1],n=a.length>1?a[a.length-2]:null,i=n?(r.value-n.value)/n.value*100:0,s=n?(r.cost-n.cost)/n.cost*100:0,x=n?r.efficiency-n.efficiency:0;return(0,t.jsxs)(S.Z,{gutter:[16,16],style:{marginBottom:16},children:[(0,t.jsx)(v.Z,{xs:24,sm:12,md:8,children:(0,t.jsx)(l.Z,{children:(0,t.jsx)(g.Z,{title:"\u5F53\u524D\u4EF7\u503C",value:r.value,prefix:"\xA5",formatter:function(C){return Number(C).toLocaleString()},valueStyle:{color:i>=0?"#52c41a":"#ff4d4f"},suffix:n&&(0,t.jsxs)("span",{style:{fontSize:"12px",color:i>=0?"#52c41a":"#ff4d4f"},children:[i>=0?"+":"",i.toFixed(2),"%"]})})})}),(0,t.jsx)(v.Z,{xs:24,sm:12,md:8,children:(0,t.jsx)(l.Z,{children:(0,t.jsx)(g.Z,{title:"\u5F53\u524D\u6210\u672C",value:r.cost,prefix:"\xA5",formatter:function(C){return Number(C).toLocaleString()},valueStyle:{color:s<=0?"#52c41a":"#ff4d4f"},suffix:n&&(0,t.jsxs)("span",{style:{fontSize:"12px",color:s<=0?"#52c41a":"#ff4d4f"},children:[s<=0?"":"+",s.toFixed(2),"%"]})})})}),(0,t.jsx)(v.Z,{xs:24,sm:12,md:8,children:(0,t.jsx)(l.Z,{children:(0,t.jsx)(g.Z,{title:"\u5F53\u524D\u6548\u7387\u5206",value:r.efficiency,valueStyle:{color:x>=0?"#52c41a":"#ff4d4f"},suffix:(0,t.jsxs)("span",{style:{fontSize:"12px",color:x>=0?"#52c41a":"#ff4d4f"},children:[x>=0?"+":"",x.toFixed(2),"%"]})})})})]})},F=function(){if(!a||a.length===0)return(0,t.jsx)("div",{style:{textAlign:"center",padding:"40px"},children:(0,t.jsx)("p",{children:"\u6682\u65E0\u8D8B\u52BF\u6570\u636E"})});var r=new Date;r.setDate(r.getDate()-30);var n=a.filter(function(i){var s=new Date(i.date);return s>=r});return(0,t.jsxs)(A.Z,{defaultActiveKey:"1",children:[(0,t.jsx)(m,{tab:"\u4EF7\u503C\u4E0E\u6210\u672C\u8D8B\u52BF",children:(0,t.jsx)(y,{data:n,showEfficiency:!1,height:400})},"1"),(0,t.jsx)(m,{tab:"\u6548\u7387\u5206\u8D8B\u52BF",children:(0,t.jsx)(y,{data:n,showEfficiency:!0,height:400})},"2"),(0,t.jsx)(m,{tab:"\u5B8C\u6574\u8D8B\u52BF",children:(0,t.jsx)(y,{data:a,showEfficiency:!0,height:400})},"3")]})};return(0,t.jsxs)("div",{children:[(0,t.jsx)("h2",{children:"ROI\u4EF7\u503C\u8FFD\u8E2A"}),d&&(0,t.jsx)(B.Z,{message:"\u5F53\u524D\u4F7F\u7528Mock\u6570\u636E",type:"info",style:{marginBottom:16}}),h?(0,t.jsxs)("div",{style:{textAlign:"center",padding:"40px"},children:[(0,t.jsx)(Z.Z,{indicator:(0,t.jsx)(R.Z,{spin:!0})}),(0,t.jsx)("p",{children:"\u52A0\u8F7DROI\u8D8B\u52BF\u4E2D..."})]}):f?(0,t.jsx)(B.Z,{message:"\u52A0\u8F7DROI\u8D8B\u52BF\u5931\u8D25",description:f,type:"error",showIcon:!0,style:{marginBottom:16}}):(0,t.jsxs)(t.Fragment,{children:[D(),(0,t.jsx)(l.Z,{title:"\u8D8B\u52BF\u5206\u6790",children:F()})]})]})},P=X}}]);
