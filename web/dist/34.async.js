"use strict";(self.webpackChunklighthouse_web=self.webpackChunklighthouse_web||[]).push([[34],{63034:function(H,M,u){u.d(M,{q:function(){return j}});var D=u(19632),C=u.n(D),O=u(15009),c=u.n(O),b=u(99289),f=u.n(b),N=u(64529),P=u(782),R=u(12444),I=u.n(R),y=u(72004),L=u.n(y),T=u(9783),G=u.n(T),E=u(54683),z={NODE_ENV:"production",PUBLIC_PATH:"/"}.API_BASE_URL||"/api",A=function(){function l(){I()(this,l),G()(this,"client",void 0),this.client=E.Z.create({baseURL:z,timeout:1e4,headers:{"Content-Type":"application/json"}}),this.client.interceptors.request.use(function(n){return n},function(n){return Promise.reject(n)}),this.client.interceptors.response.use(function(n){return n},function(n){var r,s,a={message:((r=n.response)===null||r===void 0||(r=r.data)===null||r===void 0?void 0:r.message)||n.message||"\u672A\u77E5\u9519\u8BEF",code:((s=n.response)===null||s===void 0||(s=s.data)===null||s===void 0?void 0:s.code)||"UNKNOWN_ERROR",timestamp:new Date().toISOString()};return Promise.reject(a)})}return L()(l,[{key:"get",value:function(r,s){return this.client.get(r,s)}},{key:"post",value:function(r,s,a){return this.client.post(r,s,a)}},{key:"put",value:function(r,s,a){return this.client.put(r,s,a)}},{key:"delete",value:function(r,s){return this.client.delete(r,s)}}]),l}(),g=new A,v="/v1/cost",h={getGlobalCostMetrics:function(){return f()(c()().mark(function n(){var r;return c()().wrap(function(a){for(;;)switch(a.prev=a.next){case 0:return a.prev=0,a.next=3,g.get("".concat(v,"/global"));case 3:return r=a.sent,a.abrupt("return",r.data);case 7:throw a.prev=7,a.t0=a.catch(0),console.error("Failed to fetch global cost metrics:",a.t0),a.t0;case 11:case"end":return a.stop()}},n,null,[[0,7]])}))()},getNamespaceCosts:function(){return f()(c()().mark(function n(){var r;return c()().wrap(function(a){for(;;)switch(a.prev=a.next){case 0:return a.prev=0,a.next=3,g.get("".concat(v,"/namespaces"));case 3:return r=a.sent,a.abrupt("return",r.data);case 7:throw a.prev=7,a.t0=a.catch(0),console.error("Failed to fetch namespace costs:",a.t0),a.t0;case 11:case"end":return a.stop()}},n,null,[[0,7]])}))()},getDrilldownData:function(n,r){return f()(c()().mark(function s(){var a;return c()().wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,g.get("".concat(v,"/drilldown/").concat(n,"/").concat(r));case 3:return a=t.sent,t.abrupt("return",a.data);case 7:throw t.prev=7,t.t0=t.catch(0),console.error("Failed to fetch drilldown data for ".concat(n," ").concat(r,":"),t.t0),t.t0;case 11:case"end":return t.stop()}},s,null,[[0,7]])}))()},getSLOStatus:function(){return f()(c()().mark(function n(){var r;return c()().wrap(function(a){for(;;)switch(a.prev=a.next){case 0:return a.prev=0,a.next=3,g.get("".concat(v,"/slo"));case 3:return r=a.sent,a.abrupt("return",r.data);case 7:throw a.prev=7,a.t0=a.catch(0),console.error("Failed to fetch SLO status:",a.t0),a.t0;case 11:case"end":return a.stop()}},n,null,[[0,7]])}))()},getROITrends:function(){return f()(c()().mark(function n(){var r;return c()().wrap(function(a){for(;;)switch(a.prev=a.next){case 0:return a.prev=0,a.next=3,g.get("".concat(v,"/roi/trends"));case 3:return r=a.sent,a.abrupt("return",r.data);case 7:throw a.prev=7,a.t0=a.catch(0),console.error("Failed to fetch ROI trends:",a.t0),a.t0;case 11:case"end":return a.stop()}},n,null,[[0,7]])}))()}},$=function(){return{totalBillableCost:125e3,totalOptimizableSpace:37500,globalEfficiency:70,domainBreakdown:[{domain:"\u8BA1\u7B97\u8D44\u6E90",cost:85e3,optimizableSpace:25500,efficiency:70},{domain:"\u5B58\u50A8\u8D44\u6E90",cost:25e3,optimizableSpace:7500,efficiency:70},{domain:"\u7F51\u7EDC\u8D44\u6E90",cost:15e3,optimizableSpace:4500,efficiency:70}]}},U=function(){return[{namespace:"production",cost:65e3,optimizableSpace:19500,efficiency:70,resourceUsage:{cpu:65,memory:72,storage:58},recommendations:["\u4F18\u5316Pod\u8D44\u6E90\u914D\u7F6E","\u5408\u5E76\u76F8\u4F3C\u5DE5\u4F5C\u8D1F\u8F7D"]},{namespace:"staging",cost:35e3,optimizableSpace:10500,efficiency:70,resourceUsage:{cpu:45,memory:52,storage:62},recommendations:["\u51CF\u5C11\u526F\u672C\u6570\u91CF","\u4F18\u5316\u5B58\u50A8\u4F7F\u7528"]},{namespace:"development",cost:25e3,optimizableSpace:7500,efficiency:70,resourceUsage:{cpu:35,memory:42,storage:55},recommendations:["\u6E05\u7406\u672A\u4F7F\u7528\u7684\u8D44\u6E90","\u4F18\u5316\u5F00\u53D1\u73AF\u5883\u914D\u7F6E"]}]},W=function(n,r){var s={id:r,name:"".concat(n,"-").concat(r),type:n,cost:Math.random()*1e4+1e3,optimizableSpace:Math.random()*3e3+300,efficiency:Math.floor(Math.random()*30)+70};return n==="namespace"&&(s.children=[{id:"node-1",name:"node-1",type:"node",cost:5e3,optimizableSpace:1500,efficiency:70,children:[{id:"workload-1",name:"workload-1",type:"workload",cost:2500,optimizableSpace:750,efficiency:70,children:[{id:"pod-1",name:"pod-1",type:"pod",cost:1250,optimizableSpace:375,efficiency:70}]}]}]),s},F=function(){return[{serviceName:"api-gateway",status:"healthy",uptime:99.95,responseTime:120,errorRate:.02},{serviceName:"auth-service",status:"warning",uptime:99.85,responseTime:250,errorRate:.15},{serviceName:"payment-service",status:"critical",uptime:98.5,responseTime:850,errorRate:2.3}]},B=function(){for(var n=[],r=new Date,s=30;s>=0;s--){var a=new Date(r);a.setDate(a.getDate()-s);var o=a.toISOString().split("T")[0];n.push({date:o,value:Math.random()*1e5+5e4,cost:Math.random()*8e4+2e4,efficiency:Math.floor(Math.random()*30)+70})}return n},w={getGlobalCostMetrics:function(){return Promise.resolve($())},getNamespaceCosts:function(){return Promise.resolve(U())},getDrilldownData:function(n,r){return Promise.resolve(W(n,r))},getSLOStatus:function(){return Promise.resolve(F())},getROITrends:function(){return Promise.resolve(B())}},j=(0,N.Ue)()((0,P.tJ)(function(l,n){return{globalCostMetrics:null,loadingGlobalMetrics:!1,errorGlobalMetrics:null,namespaceCosts:null,loadingNamespaceCosts:!1,errorNamespaceCosts:null,currentDrilldownItem:null,drilldownPath:[],loadingDrilldown:!1,errorDrilldown:null,sloStatus:null,loadingSLO:!1,errorSLO:null,roiTrends:null,loadingROI:!1,errorROI:null,useMockData:!0,selectedNamespace:null,selectedNode:null,selectedWorkload:null,selectedPod:null,fetchGlobalCostMetrics:function(){var r=f()(c()().mark(function a(){var o,t,d,p;return c()().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(o=n(),t=o.useMockData,l({loadingGlobalMetrics:!0,errorGlobalMetrics:null}),e.prev=2,!t){e.next=9;break}return e.next=6,w.getGlobalCostMetrics();case 6:e.t0=e.sent,e.next=12;break;case 9:return e.next=11,h.getGlobalCostMetrics();case 11:e.t0=e.sent;case 12:d=e.t0,l({globalCostMetrics:d,loadingGlobalMetrics:!1}),e.next=20;break;case 16:e.prev=16,e.t1=e.catch(2),p=e.t1 instanceof Error?e.t1.message:"\u83B7\u53D6\u5168\u5C40\u6210\u672C\u6307\u6807\u5931\u8D25",l({errorGlobalMetrics:p,loadingGlobalMetrics:!1});case 20:case"end":return e.stop()}},a,null,[[2,16]])}));function s(){return r.apply(this,arguments)}return s}(),fetchNamespaceCosts:function(){var r=f()(c()().mark(function a(){var o,t,d,p;return c()().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(o=n(),t=o.useMockData,l({loadingNamespaceCosts:!0,errorNamespaceCosts:null}),e.prev=2,!t){e.next=9;break}return e.next=6,w.getNamespaceCosts();case 6:e.t0=e.sent,e.next=12;break;case 9:return e.next=11,h.getNamespaceCosts();case 11:e.t0=e.sent;case 12:d=e.t0,l({namespaceCosts:d,loadingNamespaceCosts:!1}),e.next=20;break;case 16:e.prev=16,e.t1=e.catch(2),p=e.t1 instanceof Error?e.t1.message:"\u83B7\u53D6\u547D\u540D\u7A7A\u95F4\u6210\u672C\u5931\u8D25",l({errorNamespaceCosts:p,loadingNamespaceCosts:!1});case 20:case"end":return e.stop()}},a,null,[[2,16]])}));function s(){return r.apply(this,arguments)}return s}(),fetchDrilldownData:function(){var r=f()(c()().mark(function a(o,t){var d,p,m,e,k,S;return c()().wrap(function(i){for(;;)switch(i.prev=i.next){case 0:if(d=n(),p=d.useMockData,m=d.drilldownPath,l({loadingDrilldown:!0,errorDrilldown:null}),i.prev=2,!p){i.next=9;break}return i.next=6,w.getDrilldownData(o,t);case 6:i.t0=i.sent,i.next=12;break;case 9:return i.next=11,h.getDrilldownData(o,t);case 11:i.t0=i.sent;case 12:e=i.t0,k=[].concat(C()(m),["".concat(o,":").concat(t)]),l({currentDrilldownItem:e,drilldownPath:k,loadingDrilldown:!1}),o==="namespace"?l({selectedNamespace:t,selectedNode:null,selectedWorkload:null,selectedPod:null}):o==="node"?l({selectedNode:t,selectedWorkload:null,selectedPod:null}):o==="workload"?l({selectedWorkload:t,selectedPod:null}):o==="pod"&&l({selectedPod:t}),i.next=22;break;case 18:i.prev=18,i.t1=i.catch(2),S=i.t1 instanceof Error?i.t1.message:"\u83B7\u53D6\u94BB\u53D6\u6570\u636E\u5931\u8D25",l({errorDrilldown:S,loadingDrilldown:!1});case 22:case"end":return i.stop()}},a,null,[[2,18]])}));function s(a,o){return r.apply(this,arguments)}return s}(),fetchSLOStatus:function(){var r=f()(c()().mark(function a(){var o,t,d,p;return c()().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(o=n(),t=o.useMockData,l({loadingSLO:!0,errorSLO:null}),e.prev=2,!t){e.next=9;break}return e.next=6,w.getSLOStatus();case 6:e.t0=e.sent,e.next=12;break;case 9:return e.next=11,h.getSLOStatus();case 11:e.t0=e.sent;case 12:d=e.t0,l({sloStatus:d,loadingSLO:!1}),e.next=20;break;case 16:e.prev=16,e.t1=e.catch(2),p=e.t1 instanceof Error?e.t1.message:"\u83B7\u53D6SLO\u72B6\u6001\u5931\u8D25",l({errorSLO:p,loadingSLO:!1});case 20:case"end":return e.stop()}},a,null,[[2,16]])}));function s(){return r.apply(this,arguments)}return s}(),fetchROITrends:function(){var r=f()(c()().mark(function a(){var o,t,d,p;return c()().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(o=n(),t=o.useMockData,l({loadingROI:!0,errorROI:null}),e.prev=2,!t){e.next=9;break}return e.next=6,w.getROITrends();case 6:e.t0=e.sent,e.next=12;break;case 9:return e.next=11,h.getROITrends();case 11:e.t0=e.sent;case 12:d=e.t0,l({roiTrends:d,loadingROI:!1}),e.next=20;break;case 16:e.prev=16,e.t1=e.catch(2),p=e.t1 instanceof Error?e.t1.message:"\u83B7\u53D6ROI\u8D8B\u52BF\u5931\u8D25",l({errorROI:p,loadingROI:!1});case 20:case"end":return e.stop()}},a,null,[[2,16]])}));function s(){return r.apply(this,arguments)}return s}(),setUseMockData:function(s){l({useMockData:s})},setSelectedNamespace:function(s){l({selectedNamespace:s})},setSelectedNode:function(s){l({selectedNode:s})},setSelectedWorkload:function(s){l({selectedWorkload:s})},setSelectedPod:function(s){l({selectedPod:s})},clearDrilldownPath:function(){l({drilldownPath:[],currentDrilldownItem:null,selectedNamespace:null,selectedNode:null,selectedWorkload:null,selectedPod:null})},resetErrors:function(){l({errorGlobalMetrics:null,errorNamespaceCosts:null,errorDrilldown:null,errorSLO:null,errorROI:null})}}},{name:"lighthouse-storage",partialize:function(n){return{useMockData:n.useMockData,selectedNamespace:n.selectedNamespace,selectedNode:n.selectedNode,selectedWorkload:n.selectedWorkload,selectedPod:n.selectedPod}}}))}}]);
