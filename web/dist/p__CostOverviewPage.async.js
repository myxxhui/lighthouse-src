"use strict";(self.webpackChunklighthouse_web=self.webpackChunklighthouse_web||[]).push([[535],{71239:function(re,R,i){var x=i(67294),K=i(29009),S=i(73604),j=i(46208),T=i(43815),D=i(26050),f=i(85893),Z=function(P){var O=P.efficiency,L=P.size,M=L===void 0?120:L,A=P.showLabel,N=A===void 0?!0:A,k=[{name:"\u6548\u7387",value:O},{name:"\u53EF\u4F18\u5316\u7A7A\u95F4",value:100-O}],U=["#52c41a","#faad14"],q=function(p){var _=p.cx,ee=p.cy,J=p.midAngle,Y=p.innerRadius,I=p.outerRadius,ne=p.percent,X=Y+(I-Y)*.5,te=_+X*Math.cos(-J*(Math.PI/180)),ie=ee+X*Math.sin(-J*(Math.PI/180));return(0,f.jsx)("text",{x:te,y:ie,fill:"white",textAnchor:"middle",dominantBaseline:"central",fontSize:14,fontWeight:"bold",children:"".concat((ne*100).toFixed(0),"%")})};return(0,f.jsx)("div",{style:{width:M,height:M},children:(0,f.jsx)(K.h,{width:"100%",height:"100%",children:(0,f.jsxs)(S.u,{children:[(0,f.jsx)(j.b,{data:k,cx:"50%",cy:"50%",innerRadius:M*.3,outerRadius:M*.5,paddingAngle:2,dataKey:"value",labelLine:!1,label:N?q:void 0,children:k.map(function(G,p){return(0,f.jsx)(T.b,{fill:U[p%U.length]},"cell-".concat(p))})}),(0,f.jsx)(D.u,{formatter:function(p){return["".concat(p,"%"),""]}})]})})})};R.Z=Z},68790:function(re,R,i){var x=i(67294),K=i(55090),S=i(40411),j=i(85893),T=function(f){var Z=f.status,z=f.size,P=z===void 0?"default":z,O=f.showText,L=O===void 0?!1:O,M=function(){switch(Z){case"healthy":return"#52c41a";case"warning":return"#faad14";case"critical":return"#ff4d4f";default:return"#d9d9d9"}},A=function(){switch(Z){case"healthy":return"\u5065\u5EB7";case"warning":return"\u8B66\u544A";case"critical":return"\u4E25\u91CD";default:return"\u672A\u77E5"}},N=P==="small"?8:P==="large"?16:12;return(0,j.jsx)(K.Z,{title:A(),children:(0,j.jsxs)("div",{style:{display:"flex",alignItems:"center",gap:4},children:[(0,j.jsx)(S.Z,{"data-testid":"status-indicator",color:M(),style:{width:N,height:N,borderRadius:"50%"}}),L&&(0,j.jsx)("span",{children:A()})]})})};R.Z=T},7484:function(re,R,i){i.r(R),i.d(R,{default:function(){return Me}});var x=i(67294),K=i(82188),S=i(4393),j=i(68753),T=i(30699),D=i(6226),f=i(53531),Z=i(98081),z=i(50888),P=i(93967),O=i.n(P),L=i(87462),M=i(4942),A=i(97685),N=i(91),k=i(21770),U=i(15105),q=["prefixCls","className","checked","defaultChecked","disabled","loadingIcon","checkedChildren","unCheckedChildren","onClick","onChange","onKeyDown"],G=x.forwardRef(function(e,n){var r,a=e.prefixCls,o=a===void 0?"rc-switch":a,g=e.className,m=e.checked,c=e.defaultChecked,l=e.disabled,u=e.loadingIcon,h=e.checkedChildren,s=e.unCheckedChildren,d=e.onClick,v=e.onChange,b=e.onKeyDown,V=(0,N.Z)(e,q),B=(0,k.Z)(!1,{value:m,defaultValue:c}),y=(0,A.Z)(B,2),C=y[0],E=y[1];function W($,Q){var F=C;return l||(F=$,E(F),v==null||v(F,Q)),F}function H($){$.which===U.Z.LEFT?W(!1,$):$.which===U.Z.RIGHT&&W(!0,$),b==null||b($)}function w($){var Q=W(!C,$);d==null||d(Q,$)}var ae=O()(o,g,(r={},(0,M.Z)(r,"".concat(o,"-checked"),C),(0,M.Z)(r,"".concat(o,"-disabled"),l),r));return x.createElement("button",(0,L.Z)({},V,{type:"button",role:"switch","aria-checked":C,disabled:l,className:ae,ref:n,onKeyDown:H,onClick:w}),u,x.createElement("span",{className:"".concat(o,"-inner")},x.createElement("span",{className:"".concat(o,"-inner-checked")},h),x.createElement("span",{className:"".concat(o,"-inner-unchecked")},s)))});G.displayName="Switch";var p=G,_=i(17247),ee=i(53124),J=i(98866),Y=i(98675),I=i(11568),ne=i(15063),X=i(14747),te=i(83559),ie=i(83262);const oe=e=>{const{componentCls:n,trackHeightSM:r,trackPadding:a,trackMinWidthSM:o,innerMinMarginSM:g,innerMaxMarginSM:m,handleSizeSM:c,calc:l}=e,u=`${n}-inner`,h=(0,I.bf)(l(c).add(l(a).mul(2)).equal()),s=(0,I.bf)(l(m).mul(2).equal());return{[n]:{[`&${n}-small`]:{minWidth:o,height:r,lineHeight:(0,I.bf)(r),[`${n}-inner`]:{paddingInlineStart:m,paddingInlineEnd:g,[`${u}-checked, ${u}-unchecked`]:{minHeight:r},[`${u}-checked`]:{marginInlineStart:`calc(-100% + ${h} - ${s})`,marginInlineEnd:`calc(100% - ${h} + ${s})`},[`${u}-unchecked`]:{marginTop:l(r).mul(-1).equal(),marginInlineStart:0,marginInlineEnd:0}},[`${n}-handle`]:{width:c,height:c},[`${n}-loading-icon`]:{top:l(l(c).sub(e.switchLoadingIconSize)).div(2).equal(),fontSize:e.switchLoadingIconSize},[`&${n}-checked`]:{[`${n}-inner`]:{paddingInlineStart:g,paddingInlineEnd:m,[`${u}-checked`]:{marginInlineStart:0,marginInlineEnd:0},[`${u}-unchecked`]:{marginInlineStart:`calc(100% - ${h} + ${s})`,marginInlineEnd:`calc(-100% + ${h} - ${s})`}},[`${n}-handle`]:{insetInlineStart:`calc(100% - ${(0,I.bf)(l(c).add(a).equal())})`}},[`&:not(${n}-disabled):active`]:{[`&:not(${n}-checked) ${u}`]:{[`${u}-unchecked`]:{marginInlineStart:l(e.marginXXS).div(2).equal(),marginInlineEnd:l(e.marginXXS).mul(-1).div(2).equal()}},[`&${n}-checked ${u}`]:{[`${u}-checked`]:{marginInlineStart:l(e.marginXXS).mul(-1).div(2).equal(),marginInlineEnd:l(e.marginXXS).div(2).equal()}}}}}}},de=e=>{const{componentCls:n,handleSize:r,calc:a}=e;return{[n]:{[`${n}-loading-icon${e.iconCls}`]:{position:"relative",top:a(a(r).sub(e.fontSize)).div(2).equal(),color:e.switchLoadingIconColor,verticalAlign:"top"},[`&${n}-checked ${n}-loading-icon`]:{color:e.switchColor}}}},ue=e=>{const{componentCls:n,trackPadding:r,handleBg:a,handleShadow:o,handleSize:g,calc:m}=e,c=`${n}-handle`;return{[n]:{[c]:{position:"absolute",top:r,insetInlineStart:r,width:g,height:g,transition:`all ${e.switchDuration} ease-in-out`,"&::before":{position:"absolute",top:0,insetInlineEnd:0,bottom:0,insetInlineStart:0,backgroundColor:a,borderRadius:m(g).div(2).equal(),boxShadow:o,transition:`all ${e.switchDuration} ease-in-out`,content:'""'}},[`&${n}-checked ${c}`]:{insetInlineStart:`calc(100% - ${(0,I.bf)(m(g).add(r).equal())})`},[`&:not(${n}-disabled):active`]:{[`${c}::before`]:{insetInlineEnd:e.switchHandleActiveInset,insetInlineStart:0},[`&${n}-checked ${c}::before`]:{insetInlineEnd:0,insetInlineStart:e.switchHandleActiveInset}}}}},he=e=>{const{componentCls:n,trackHeight:r,trackPadding:a,innerMinMargin:o,innerMaxMargin:g,handleSize:m,calc:c}=e,l=`${n}-inner`,u=(0,I.bf)(c(m).add(c(a).mul(2)).equal()),h=(0,I.bf)(c(g).mul(2).equal());return{[n]:{[l]:{display:"block",overflow:"hidden",borderRadius:100,height:"100%",paddingInlineStart:g,paddingInlineEnd:o,transition:`padding-inline-start ${e.switchDuration} ease-in-out, padding-inline-end ${e.switchDuration} ease-in-out`,[`${l}-checked, ${l}-unchecked`]:{display:"block",color:e.colorTextLightSolid,fontSize:e.fontSizeSM,transition:`margin-inline-start ${e.switchDuration} ease-in-out, margin-inline-end ${e.switchDuration} ease-in-out`,pointerEvents:"none",minHeight:r},[`${l}-checked`]:{marginInlineStart:`calc(-100% + ${u} - ${h})`,marginInlineEnd:`calc(100% - ${u} + ${h})`},[`${l}-unchecked`]:{marginTop:c(r).mul(-1).equal(),marginInlineStart:0,marginInlineEnd:0}},[`&${n}-checked ${l}`]:{paddingInlineStart:o,paddingInlineEnd:g,[`${l}-checked`]:{marginInlineStart:0,marginInlineEnd:0},[`${l}-unchecked`]:{marginInlineStart:`calc(100% - ${u} + ${h})`,marginInlineEnd:`calc(-100% + ${u} - ${h})`}},[`&:not(${n}-disabled):active`]:{[`&:not(${n}-checked) ${l}`]:{[`${l}-unchecked`]:{marginInlineStart:c(a).mul(2).equal(),marginInlineEnd:c(a).mul(-1).mul(2).equal()}},[`&${n}-checked ${l}`]:{[`${l}-checked`]:{marginInlineStart:c(a).mul(-1).mul(2).equal(),marginInlineEnd:c(a).mul(2).equal()}}}}}},ge=e=>{const{componentCls:n,trackHeight:r,trackMinWidth:a}=e;return{[n]:Object.assign(Object.assign(Object.assign(Object.assign({},(0,X.Wf)(e)),{position:"relative",display:"inline-block",boxSizing:"border-box",minWidth:a,height:r,lineHeight:(0,I.bf)(r),verticalAlign:"middle",background:e.colorTextQuaternary,border:"0",borderRadius:100,cursor:"pointer",transition:`all ${e.motionDurationMid}`,userSelect:"none",[`&:hover:not(${n}-disabled)`]:{background:e.colorTextTertiary}}),(0,X.Qy)(e)),{[`&${n}-checked`]:{background:e.switchColor,[`&:hover:not(${n}-disabled)`]:{background:e.colorPrimaryHover}},[`&${n}-loading, &${n}-disabled`]:{cursor:"not-allowed",opacity:e.switchDisabledOpacity,"*":{boxShadow:"none",cursor:"not-allowed"}},[`&${n}-rtl`]:{direction:"rtl"}})}},me=e=>{const{fontSize:n,lineHeight:r,controlHeight:a,colorWhite:o}=e,g=n*r,m=a/2,c=2,l=g-c*2,u=m-c*2;return{trackHeight:g,trackHeightSM:m,trackMinWidth:l*2+c*4,trackMinWidthSM:u*2+c*2,trackPadding:c,handleBg:o,handleSize:l,handleSizeSM:u,handleShadow:`0 2px 4px 0 ${new ne.t("#00230b").setA(.2).toRgbString()}`,innerMinMargin:l/2,innerMaxMargin:l+c+c*2,innerMinMarginSM:u/2,innerMaxMarginSM:u+c+c*2}};var fe=(0,te.I$)("Switch",e=>{const n=(0,ie.IX)(e,{switchDuration:e.motionDurationMid,switchColor:e.colorPrimary,switchDisabledOpacity:e.opacityLoading,switchLoadingIconSize:e.calc(e.fontSizeIcon).mul(.75).equal(),switchLoadingIconColor:`rgba(0, 0, 0, ${e.opacityLoading})`,switchHandleActiveInset:"-30%"});return[ge(n),he(n),ue(n),de(n),oe(n)]},me),ve=function(e,n){var r={};for(var a in e)Object.prototype.hasOwnProperty.call(e,a)&&n.indexOf(a)<0&&(r[a]=e[a]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var o=0,a=Object.getOwnPropertySymbols(e);o<a.length;o++)n.indexOf(a[o])<0&&Object.prototype.propertyIsEnumerable.call(e,a[o])&&(r[a[o]]=e[a[o]]);return r};const le=x.forwardRef((e,n)=>{const{prefixCls:r,size:a,disabled:o,loading:g,className:m,rootClassName:c,style:l,checked:u,value:h,defaultChecked:s,defaultValue:d,onChange:v}=e,b=ve(e,["prefixCls","size","disabled","loading","className","rootClassName","style","checked","value","defaultChecked","defaultValue","onChange"]),[V,B]=(0,k.Z)(!1,{value:u!=null?u:h,defaultValue:s!=null?s:d}),{getPrefixCls:y,direction:C,switch:E}=x.useContext(ee.E_),W=x.useContext(J.Z),H=(o!=null?o:W)||g,w=y("switch",r),ae=x.createElement("div",{className:`${w}-handle`},g&&x.createElement(z.Z,{className:`${w}-loading-icon`})),[$,Q,F]=fe(w),be=(0,Y.Z)(a),we=O()(E==null?void 0:E.className,{[`${w}-small`]:be==="small",[`${w}-loading`]:g,[`${w}-rtl`]:C==="rtl"},m,c,Q,F),De=Object.assign(Object.assign({},E==null?void 0:E.style),l),Ze=(...se)=>{B(se[0]),v==null||v.apply(void 0,se)};return $(x.createElement(_.Z,{component:"Switch",disabled:H},x.createElement(p,Object.assign({},b,{checked:V,onChange:Ze,prefixCls:w,className:we,style:De,disabled:H,ref:n,loadingIcon:ae}))))});le.__ANT_SWITCH=!0;var xe=le,Ce=i(66309),Se=i(11189),pe=i(10588),ce=i(71239),ye=i(68790),t=i(85893),$e=function(n){var r=n.data,a=n.loading,o=a===void 0?!1:a,g=n.onRowClick,m=n.showRecommendations,c=m===void 0?!0:m,l=[{title:"\u547D\u540D\u7A7A\u95F4",dataIndex:"namespace",key:"namespace",render:function(s){return(0,t.jsx)("strong",{children:s})}},{title:"\u6210\u672C (\xA5)",dataIndex:"cost",key:"cost",render:function(s){return s.toLocaleString()},sorter:function(s,d){return s.cost-d.cost}},{title:"\u53EF\u4F18\u5316\u7A7A\u95F4 (\xA5)",dataIndex:"optimizableSpace",key:"optimizableSpace",render:function(s){return(0,t.jsx)(Ce.Z,{color:"warning",children:s.toLocaleString()})},sorter:function(s,d){return s.optimizableSpace-d.optimizableSpace}},{title:"\u6548\u7387\u5206 (%)",dataIndex:"efficiency",key:"efficiency",render:function(s){return(0,t.jsxs)(Z.Z,{children:[(0,t.jsx)(ce.Z,{efficiency:s,size:40,showLabel:!1}),(0,t.jsxs)("span",{children:[s,"%"]})]})},sorter:function(s,d){return s.efficiency-d.efficiency}},{title:"\u8D44\u6E90\u4F7F\u7528\u7387",key:"resourceUsage",render:function(s,d){return(0,t.jsxs)(Z.Z,{direction:"vertical",size:"small",children:[(0,t.jsxs)("div",{children:["CPU: ",d.resourceUsage.cpu,"%"]}),(0,t.jsxs)("div",{children:["\u5185\u5B58: ",d.resourceUsage.memory,"%"]}),(0,t.jsxs)("div",{children:["\u5B58\u50A8: ",d.resourceUsage.storage,"%"]})]})}},{title:"\u5065\u5EB7\u72B6\u6001",key:"status",render:function(s,d){var v="healthy";return d.efficiency<50?v="critical":d.efficiency<70&&(v="warning"),(0,t.jsx)(ye.Z,{status:v})}},{title:"\u64CD\u4F5C",key:"action",render:function(s,d){return(0,t.jsx)(Se.ZP,{type:"link",onClick:function(){return g&&g(d)},children:"\u8BE6\u60C5"})}}],u=function(s){var d;return!c||!((d=s.recommendations)!==null&&d!==void 0&&d.length)?null:(0,t.jsxs)("div",{style:{padding:"16px 0"},children:[(0,t.jsx)("h4",{children:"\u4F18\u5316\u5EFA\u8BAE:"}),(0,t.jsx)("ul",{children:s.recommendations.map(function(v,b){return(0,t.jsx)("li",{children:v},b)})})]})};return(0,t.jsx)(pe.Z,{dataSource:r,columns:l,loading:o,rowKey:"namespace",onRow:function(s){return{onClick:function(){return g&&g(s)}}},expandable:{expandedRowRender:u,rowExpandable:function(s){var d;return c&&!!((d=s.recommendations)!==null&&d!==void 0&&d.length)}},pagination:{pageSize:10,showSizeChanger:!0,pageSizeOptions:["10","20","50"]}})},Ie=$e,Ee=i(12021),je=function(){var n=(0,K.s0)(),r=(0,Ee.q)(),a=r.globalCostMetrics,o=r.namespaceCosts,g=r.loadingGlobalMetrics,m=r.loadingNamespaceCosts,c=r.errorGlobalMetrics,l=r.errorNamespaceCosts,u=r.useMockData,h=r.fetchGlobalCostMetrics,s=r.fetchNamespaceCosts,d=r.setUseMockData;(0,x.useEffect)(function(){h(),s()},[h,s]);var v=function(y){n("/DrilldownPage?type=namespace&id=".concat(y.namespace))},b=function(){return g?(0,t.jsx)(S.Z,{loading:!0,children:(0,t.jsx)(z.Z,{})}):c?(0,t.jsx)(j.Z,{message:"\u52A0\u8F7D\u5168\u5C40\u6307\u6807\u5931\u8D25",description:c,type:"error",showIcon:!0}):a?(0,t.jsxs)(T.Z,{gutter:[16,16],children:[(0,t.jsx)(D.Z,{xs:24,sm:12,md:6,children:(0,t.jsx)(S.Z,{children:(0,t.jsx)(f.Z,{title:"\u603B\u8D26\u5355\u6210\u672C",value:a.totalBillableCost,prefix:"\xA5",formatter:function(C){return Number(C).toLocaleString()}})})}),(0,t.jsx)(D.Z,{xs:24,sm:12,md:6,children:(0,t.jsx)(S.Z,{children:(0,t.jsx)(f.Z,{title:"\u53EF\u4F18\u5316\u7A7A\u95F4",value:a.totalOptimizableSpace,prefix:"\xA5",formatter:function(C){return Number(C).toLocaleString()}})})}),(0,t.jsx)(D.Z,{xs:24,sm:12,md:6,children:(0,t.jsx)(S.Z,{children:(0,t.jsx)(f.Z,{title:"\u5168\u5C40\u6548\u7387\u5206",value:a.globalEfficiency,suffix:"%"})})}),(0,t.jsx)(D.Z,{xs:24,sm:12,md:6,children:(0,t.jsx)(S.Z,{children:(0,t.jsx)("div",{style:{display:"flex",justifyContent:"center",alignItems:"center",height:"100%"},children:(0,t.jsx)(ce.Z,{efficiency:a.globalEfficiency,size:80})})})})]}):(0,t.jsx)(S.Z,{children:"\u6682\u65E0\u6570\u636E"})},V=function(){var y;return a!=null&&(y=a.domainBreakdown)!==null&&y!==void 0&&y.length?(0,t.jsx)(S.Z,{title:"\u9886\u57DF\u6210\u672C\u5206\u89E3",style:{marginTop:16},children:(0,t.jsx)(T.Z,{gutter:[16,16],children:a.domainBreakdown.map(function(C,E){return(0,t.jsx)(D.Z,{xs:24,sm:12,md:8,lg:6,children:(0,t.jsx)(S.Z,{size:"small",children:(0,t.jsx)(f.Z,{title:C.domain,value:C.cost,prefix:"\xA5",formatter:function(H){return Number(H).toLocaleString()},suffix:(0,t.jsx)("div",{style:{marginTop:8},children:(0,t.jsxs)("small",{children:["\u6548\u7387: ",C.efficiency,"%"]})})})})},E)})})}):null};return(0,t.jsxs)("div",{children:[(0,t.jsxs)("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:16},children:[(0,t.jsx)("h2",{children:"\u5168\u57DF\u6210\u672C\u900F\u89C6"}),(0,t.jsxs)(Z.Z,{children:[(0,t.jsx)("span",{children:"\u4F7F\u7528Mock\u6570\u636E"}),(0,t.jsx)(xe,{checked:u,onChange:d,checkedChildren:"\u662F",unCheckedChildren:"\u5426"})]})]}),b(),V(),(0,t.jsx)(S.Z,{title:"\u547D\u540D\u7A7A\u95F4\u6210\u672C\u660E\u7EC6",style:{marginTop:16},children:m?(0,t.jsxs)("div",{style:{textAlign:"center",padding:"20px"},children:[(0,t.jsx)(z.Z,{spin:!0})," \u52A0\u8F7D\u4E2D..."]}):l?(0,t.jsx)(j.Z,{message:"\u52A0\u8F7D\u547D\u540D\u7A7A\u95F4\u6210\u672C\u5931\u8D25",description:l,type:"error",showIcon:!0}):o!=null&&o.length?(0,t.jsx)(Ie,{data:o,onRowClick:v}):(0,t.jsx)("div",{style:{textAlign:"center",padding:"20px"},children:"\u6682\u65E0\u547D\u540D\u7A7A\u95F4\u6570\u636E"})})]})},Me=je}}]);
