"use strict";(self.webpackChunklighthouse_web=self.webpackChunklighthouse_web||[]).push([[535],{71239:function(re,B,i){var v=i(67294),C=i(29009),W=i(73604),E=i(46208),j=i(43815),z=i(26050),x=i(85893),Z=function(M){var k=M.efficiency,A=M.size,O=A===void 0?120:A,R=M.showLabel,T=R===void 0?!0:R,L=[{name:"\u6548\u7387",value:k},{name:"\u53EF\u4F18\u5316\u7A7A\u95F4",value:100-k}],G=["#52c41a","#faad14"],X=function(S){var _=S.cx,ee=S.cy,Q=S.midAngle,$=S.innerRadius,ne=S.outerRadius,J=S.percent,Y=$+(ne-$)*.5,te=_+Y*Math.cos(-Q*(Math.PI/180)),ie=ee+Y*Math.sin(-Q*(Math.PI/180));return(0,x.jsx)("text",{x:te,y:ie,fill:"white",textAnchor:"middle",dominantBaseline:"central",fontSize:14,fontWeight:"bold",children:"".concat((J*100).toFixed(0),"%")})};return(0,x.jsx)("div",{style:{width:O,height:O},children:(0,x.jsx)(C.h,{width:"100%",height:"100%",children:(0,x.jsxs)(W.u,{children:[(0,x.jsx)(E.b,{data:L,cx:"50%",cy:"50%",innerRadius:O*.3,outerRadius:O*.5,paddingAngle:2,dataKey:"value",labelLine:!1,label:T?X:void 0,children:L.map(function(V,S){return(0,x.jsx)(j.b,{fill:G[S%G.length]},"cell-".concat(S))})}),(0,x.jsx)(z.u,{formatter:function(S){return["".concat(S,"%"),""]}})]})})})};B.Z=Z},68790:function(re,B,i){var v=i(67294),C=i(42697),W=i(40411),E=i(85893),j=function(x){var Z=x.status,K=x.size,M=K===void 0?"default":K,k=x.showText,A=k===void 0?!1:k,O=function(){switch(Z){case"healthy":return"#52c41a";case"warning":return"#faad14";case"critical":return"#ff4d4f";default:return"#d9d9d9"}},R=function(){switch(Z){case"healthy":return"\u5065\u5EB7";case"warning":return"\u8B66\u544A";case"critical":return"\u4E25\u91CD";default:return"\u672A\u77E5"}},T=M==="small"?8:M==="large"?16:12;return(0,E.jsx)(C.Z,{title:R(),children:(0,E.jsxs)("div",{style:{display:"flex",alignItems:"center",gap:4},children:[(0,E.jsx)(W.Z,{"data-testid":"status-indicator",color:O(),style:{width:T,height:T,borderRadius:"50%"}}),A&&(0,E.jsx)("span",{children:R()})]})})};B.Z=j},7484:function(re,B,i){i.r(B),i.d(B,{default:function(){return je}});var v=i(67294),C=i(4393),W=i(99217),E=i(30699),j=i(6226),z=i(53531),x=i(98081),Z=i(50888),K=i(93967),M=i.n(K),k=i(87462),A=i(4942),O=i(97685),R=i(91),T=i(21770),L=i(15105),G=["prefixCls","className","checked","defaultChecked","disabled","loadingIcon","checkedChildren","unCheckedChildren","onClick","onChange","onKeyDown"],X=v.forwardRef(function(e,n){var a,r=e.prefixCls,u=r===void 0?"rc-switch":r,g=e.className,m=e.checked,l=e.defaultChecked,c=e.disabled,o=e.loadingIcon,h=e.checkedChildren,s=e.unCheckedChildren,d=e.onClick,f=e.onChange,b=e.onKeyDown,H=(0,R.Z)(e,G),I=(0,T.Z)(!1,{value:m,defaultValue:l}),p=(0,O.Z)(I,2),P=p[0],w=p[1];function N(y,U){var F=P;return c||(F=y,w(F),f==null||f(F,U)),F}function q(y){y.which===L.Z.LEFT?N(!1,y):y.which===L.Z.RIGHT&&N(!0,y),b==null||b(y)}function D(y){var U=N(!P,y);d==null||d(U,y)}var ae=M()(u,g,(a={},(0,A.Z)(a,"".concat(u,"-checked"),P),(0,A.Z)(a,"".concat(u,"-disabled"),c),a));return v.createElement("button",(0,k.Z)({},H,{type:"button",role:"switch","aria-checked":P,disabled:c,className:ae,ref:n,onKeyDown:q,onClick:D}),o,v.createElement("span",{className:"".concat(u,"-inner")},v.createElement("span",{className:"".concat(u,"-inner-checked")},h),v.createElement("span",{className:"".concat(u,"-inner-unchecked")},s)))});X.displayName="Switch";var V=X,S=i(17247),_=i(53124),ee=i(98866),Q=i(98675),$=i(11568),ne=i(15063),J=i(14747),Y=i(83559),te=i(83262);const ie=e=>{const{componentCls:n,trackHeightSM:a,trackPadding:r,trackMinWidthSM:u,innerMinMarginSM:g,innerMaxMarginSM:m,handleSizeSM:l,calc:c}=e,o=`${n}-inner`,h=(0,$.bf)(c(l).add(c(r).mul(2)).equal()),s=(0,$.bf)(c(m).mul(2).equal());return{[n]:{[`&${n}-small`]:{minWidth:u,height:a,lineHeight:(0,$.bf)(a),[`${n}-inner`]:{paddingInlineStart:m,paddingInlineEnd:g,[`${o}-checked, ${o}-unchecked`]:{minHeight:a},[`${o}-checked`]:{marginInlineStart:`calc(-100% + ${h} - ${s})`,marginInlineEnd:`calc(100% - ${h} + ${s})`},[`${o}-unchecked`]:{marginTop:c(a).mul(-1).equal(),marginInlineStart:0,marginInlineEnd:0}},[`${n}-handle`]:{width:l,height:l},[`${n}-loading-icon`]:{top:c(c(l).sub(e.switchLoadingIconSize)).div(2).equal(),fontSize:e.switchLoadingIconSize},[`&${n}-checked`]:{[`${n}-inner`]:{paddingInlineStart:g,paddingInlineEnd:m,[`${o}-checked`]:{marginInlineStart:0,marginInlineEnd:0},[`${o}-unchecked`]:{marginInlineStart:`calc(100% - ${h} + ${s})`,marginInlineEnd:`calc(-100% + ${h} - ${s})`}},[`${n}-handle`]:{insetInlineStart:`calc(100% - ${(0,$.bf)(c(l).add(r).equal())})`}},[`&:not(${n}-disabled):active`]:{[`&:not(${n}-checked) ${o}`]:{[`${o}-unchecked`]:{marginInlineStart:c(e.marginXXS).div(2).equal(),marginInlineEnd:c(e.marginXXS).mul(-1).div(2).equal()}},[`&${n}-checked ${o}`]:{[`${o}-checked`]:{marginInlineStart:c(e.marginXXS).mul(-1).div(2).equal(),marginInlineEnd:c(e.marginXXS).div(2).equal()}}}}}}},oe=e=>{const{componentCls:n,handleSize:a,calc:r}=e;return{[n]:{[`${n}-loading-icon${e.iconCls}`]:{position:"relative",top:r(r(a).sub(e.fontSize)).div(2).equal(),color:e.switchLoadingIconColor,verticalAlign:"top"},[`&${n}-checked ${n}-loading-icon`]:{color:e.switchColor}}}},de=e=>{const{componentCls:n,trackPadding:a,handleBg:r,handleShadow:u,handleSize:g,calc:m}=e,l=`${n}-handle`;return{[n]:{[l]:{position:"absolute",top:a,insetInlineStart:a,width:g,height:g,transition:`all ${e.switchDuration} ease-in-out`,"&::before":{position:"absolute",top:0,insetInlineEnd:0,bottom:0,insetInlineStart:0,backgroundColor:r,borderRadius:m(g).div(2).equal(),boxShadow:u,transition:`all ${e.switchDuration} ease-in-out`,content:'""'}},[`&${n}-checked ${l}`]:{insetInlineStart:`calc(100% - ${(0,$.bf)(m(g).add(a).equal())})`},[`&:not(${n}-disabled):active`]:{[`${l}::before`]:{insetInlineEnd:e.switchHandleActiveInset,insetInlineStart:0},[`&${n}-checked ${l}::before`]:{insetInlineEnd:0,insetInlineStart:e.switchHandleActiveInset}}}}},ue=e=>{const{componentCls:n,trackHeight:a,trackPadding:r,innerMinMargin:u,innerMaxMargin:g,handleSize:m,calc:l}=e,c=`${n}-inner`,o=(0,$.bf)(l(m).add(l(r).mul(2)).equal()),h=(0,$.bf)(l(g).mul(2).equal());return{[n]:{[c]:{display:"block",overflow:"hidden",borderRadius:100,height:"100%",paddingInlineStart:g,paddingInlineEnd:u,transition:`padding-inline-start ${e.switchDuration} ease-in-out, padding-inline-end ${e.switchDuration} ease-in-out`,[`${c}-checked, ${c}-unchecked`]:{display:"block",color:e.colorTextLightSolid,fontSize:e.fontSizeSM,transition:`margin-inline-start ${e.switchDuration} ease-in-out, margin-inline-end ${e.switchDuration} ease-in-out`,pointerEvents:"none",minHeight:a},[`${c}-checked`]:{marginInlineStart:`calc(-100% + ${o} - ${h})`,marginInlineEnd:`calc(100% - ${o} + ${h})`},[`${c}-unchecked`]:{marginTop:l(a).mul(-1).equal(),marginInlineStart:0,marginInlineEnd:0}},[`&${n}-checked ${c}`]:{paddingInlineStart:u,paddingInlineEnd:g,[`${c}-checked`]:{marginInlineStart:0,marginInlineEnd:0},[`${c}-unchecked`]:{marginInlineStart:`calc(100% - ${o} + ${h})`,marginInlineEnd:`calc(-100% + ${o} - ${h})`}},[`&:not(${n}-disabled):active`]:{[`&:not(${n}-checked) ${c}`]:{[`${c}-unchecked`]:{marginInlineStart:l(r).mul(2).equal(),marginInlineEnd:l(r).mul(-1).mul(2).equal()}},[`&${n}-checked ${c}`]:{[`${c}-checked`]:{marginInlineStart:l(r).mul(-1).mul(2).equal(),marginInlineEnd:l(r).mul(2).equal()}}}}}},he=e=>{const{componentCls:n,trackHeight:a,trackMinWidth:r}=e;return{[n]:Object.assign(Object.assign(Object.assign(Object.assign({},(0,J.Wf)(e)),{position:"relative",display:"inline-block",boxSizing:"border-box",minWidth:r,height:a,lineHeight:(0,$.bf)(a),verticalAlign:"middle",background:e.colorTextQuaternary,border:"0",borderRadius:100,cursor:"pointer",transition:`all ${e.motionDurationMid}`,userSelect:"none",[`&:hover:not(${n}-disabled)`]:{background:e.colorTextTertiary}}),(0,J.Qy)(e)),{[`&${n}-checked`]:{background:e.switchColor,[`&:hover:not(${n}-disabled)`]:{background:e.colorPrimaryHover}},[`&${n}-loading, &${n}-disabled`]:{cursor:"not-allowed",opacity:e.switchDisabledOpacity,"*":{boxShadow:"none",cursor:"not-allowed"}},[`&${n}-rtl`]:{direction:"rtl"}})}},ge=e=>{const{fontSize:n,lineHeight:a,controlHeight:r,colorWhite:u}=e,g=n*a,m=r/2,l=2,c=g-l*2,o=m-l*2;return{trackHeight:g,trackHeightSM:m,trackMinWidth:c*2+l*4,trackMinWidthSM:o*2+l*2,trackPadding:l,handleBg:u,handleSize:c,handleSizeSM:o,handleShadow:`0 2px 4px 0 ${new ne.t("#00230b").setA(.2).toRgbString()}`,innerMinMargin:c/2,innerMaxMargin:c+l+l*2,innerMinMarginSM:o/2,innerMaxMarginSM:o+l+l*2}};var me=(0,Y.I$)("Switch",e=>{const n=(0,te.IX)(e,{switchDuration:e.motionDurationMid,switchColor:e.colorPrimary,switchDisabledOpacity:e.opacityLoading,switchLoadingIconSize:e.calc(e.fontSizeIcon).mul(.75).equal(),switchLoadingIconColor:`rgba(0, 0, 0, ${e.opacityLoading})`,switchHandleActiveInset:"-30%"});return[he(n),ue(n),de(n),oe(n),ie(n)]},ge),fe=function(e,n){var a={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&n.indexOf(r)<0&&(a[r]=e[r]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var u=0,r=Object.getOwnPropertySymbols(e);u<r.length;u++)n.indexOf(r[u])<0&&Object.prototype.propertyIsEnumerable.call(e,r[u])&&(a[r[u]]=e[r[u]]);return a};const le=v.forwardRef((e,n)=>{const{prefixCls:a,size:r,disabled:u,loading:g,className:m,rootClassName:l,style:c,checked:o,value:h,defaultChecked:s,defaultValue:d,onChange:f}=e,b=fe(e,["prefixCls","size","disabled","loading","className","rootClassName","style","checked","value","defaultChecked","defaultValue","onChange"]),[H,I]=(0,T.Z)(!1,{value:o!=null?o:h,defaultValue:s!=null?s:d}),{getPrefixCls:p,direction:P,switch:w}=v.useContext(_.E_),N=v.useContext(ee.Z),q=(u!=null?u:N)||g,D=p("switch",a),ae=v.createElement("div",{className:`${D}-handle`},g&&v.createElement(Z.Z,{className:`${D}-loading-icon`})),[y,U,F]=me(D),Me=(0,Q.Z)(r),be=M()(w==null?void 0:w.className,{[`${D}-small`]:Me==="small",[`${D}-loading`]:g,[`${D}-rtl`]:P==="rtl"},m,l,U,F),we=Object.assign(Object.assign({},w==null?void 0:w.style),c),De=(...se)=>{I(se[0]),f==null||f.apply(void 0,se)};return y(v.createElement(S.Z,{component:"Switch",disabled:q},v.createElement(V,Object.assign({},b,{checked:H,onChange:De,prefixCls:D,className:be,style:we,disabled:q,ref:n,loadingIcon:ae}))))});le.__ANT_SWITCH=!0;var ve=le,xe=i(79977),Ce=i(11189),Se=i(49897),ce=i(71239),pe=i(68790),t=i(85893),ye=function(n){var a=n.data,r=n.loading,u=r===void 0?!1:r,g=n.onRowClick,m=n.showRecommendations,l=m===void 0?!0:m,c=[{title:"\u547D\u540D\u7A7A\u95F4",dataIndex:"namespace",key:"namespace",render:function(s){return(0,t.jsx)("strong",{children:s})}},{title:"\u6210\u672C (\xA5)",dataIndex:"cost",key:"cost",render:function(s){return s.toLocaleString()},sorter:function(s,d){return s.cost-d.cost}},{title:"\u53EF\u4F18\u5316\u7A7A\u95F4 (\xA5)",dataIndex:"optimizableSpace",key:"optimizableSpace",render:function(s){return(0,t.jsx)(xe.Z,{color:"warning",children:s.toLocaleString()})},sorter:function(s,d){return s.optimizableSpace-d.optimizableSpace}},{title:"\u6548\u7387\u5206 (%)",dataIndex:"efficiency",key:"efficiency",render:function(s){return(0,t.jsxs)(x.Z,{children:[(0,t.jsx)(ce.Z,{efficiency:s,size:40,showLabel:!1}),(0,t.jsxs)("span",{children:[s,"%"]})]})},sorter:function(s,d){return s.efficiency-d.efficiency}},{title:"\u8D44\u6E90\u4F7F\u7528\u7387",key:"resourceUsage",render:function(s,d){return(0,t.jsxs)(x.Z,{direction:"vertical",size:"small",children:[(0,t.jsxs)("div",{children:["CPU: ",d.resourceUsage.cpu,"%"]}),(0,t.jsxs)("div",{children:["\u5185\u5B58: ",d.resourceUsage.memory,"%"]}),(0,t.jsxs)("div",{children:["\u5B58\u50A8: ",d.resourceUsage.storage,"%"]})]})}},{title:"\u5065\u5EB7\u72B6\u6001",key:"status",render:function(s,d){var f="healthy";return d.efficiency<50?f="critical":d.efficiency<70&&(f="warning"),(0,t.jsx)(pe.Z,{status:f})}},{title:"\u64CD\u4F5C",key:"action",render:function(s,d){return(0,t.jsx)(Ce.ZP,{type:"link",onClick:function(){return g&&g(d)},children:"\u8BE6\u60C5"})}}],o=function(s){var d;return!l||!((d=s.recommendations)!==null&&d!==void 0&&d.length)?null:(0,t.jsxs)("div",{style:{padding:"16px 0"},children:[(0,t.jsx)("h4",{children:"\u4F18\u5316\u5EFA\u8BAE:"}),(0,t.jsx)("ul",{children:s.recommendations.map(function(f,b){return(0,t.jsx)("li",{children:f},b)})})]})};return(0,t.jsx)(Se.Z,{dataSource:a,columns:c,loading:u,rowKey:"namespace",onRow:function(s){return{onClick:function(){return g&&g(s)}}},expandable:{expandedRowRender:o,rowExpandable:function(s){var d;return l&&!!((d=s.recommendations)!==null&&d!==void 0&&d.length)}},pagination:{pageSize:10,showSizeChanger:!0,pageSizeOptions:["10","20","50"]}})},$e=ye,Ie=i(63034),Ee=function(){var n=(0,Ie.q)(),a=n.globalCostMetrics,r=n.namespaceCosts,u=n.loadingGlobalMetrics,g=n.loadingNamespaceCosts,m=n.errorGlobalMetrics,l=n.errorNamespaceCosts,c=n.useMockData,o=n.fetchGlobalCostMetrics,h=n.fetchNamespaceCosts,s=n.setUseMockData;(0,v.useEffect)(function(){o(),h()},[o,h]);var d=function(I){console.log("Navigate to drilldown for:",I.namespace)},f=function(){return u?(0,t.jsx)(C.Z,{loading:!0,children:(0,t.jsx)(Z.Z,{})}):m?(0,t.jsx)(W.Z,{message:"\u52A0\u8F7D\u5168\u5C40\u6307\u6807\u5931\u8D25",description:m,type:"error",showIcon:!0}):a?(0,t.jsxs)(E.Z,{gutter:[16,16],children:[(0,t.jsx)(j.Z,{xs:24,sm:12,md:6,children:(0,t.jsx)(C.Z,{children:(0,t.jsx)(z.Z,{title:"\u603B\u8D26\u5355\u6210\u672C",value:a.totalBillableCost,prefix:"\xA5",formatter:function(p){return Number(p).toLocaleString()}})})}),(0,t.jsx)(j.Z,{xs:24,sm:12,md:6,children:(0,t.jsx)(C.Z,{children:(0,t.jsx)(z.Z,{title:"\u53EF\u4F18\u5316\u7A7A\u95F4",value:a.totalOptimizableSpace,prefix:"\xA5",formatter:function(p){return Number(p).toLocaleString()}})})}),(0,t.jsx)(j.Z,{xs:24,sm:12,md:6,children:(0,t.jsx)(C.Z,{children:(0,t.jsx)(z.Z,{title:"\u5168\u5C40\u6548\u7387\u5206",value:a.globalEfficiency,suffix:"%"})})}),(0,t.jsx)(j.Z,{xs:24,sm:12,md:6,children:(0,t.jsx)(C.Z,{children:(0,t.jsx)("div",{style:{display:"flex",justifyContent:"center",alignItems:"center",height:"100%"},children:(0,t.jsx)(ce.Z,{efficiency:a.globalEfficiency,size:80})})})})]}):(0,t.jsx)(C.Z,{children:"\u6682\u65E0\u6570\u636E"})},b=function(){var I;return a!=null&&(I=a.domainBreakdown)!==null&&I!==void 0&&I.length?(0,t.jsx)(C.Z,{title:"\u9886\u57DF\u6210\u672C\u5206\u89E3",style:{marginTop:16},children:(0,t.jsx)(E.Z,{gutter:[16,16],children:a.domainBreakdown.map(function(p,P){return(0,t.jsx)(j.Z,{xs:24,sm:12,md:8,lg:6,children:(0,t.jsx)(C.Z,{size:"small",children:(0,t.jsx)(z.Z,{title:p.domain,value:p.cost,prefix:"\xA5",formatter:function(N){return Number(N).toLocaleString()},suffix:(0,t.jsx)("div",{style:{marginTop:8},children:(0,t.jsxs)("small",{children:["\u6548\u7387: ",p.efficiency,"%"]})})})})},P)})})}):null};return(0,t.jsxs)("div",{children:[(0,t.jsxs)("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:16},children:[(0,t.jsx)("h2",{children:"\u5168\u57DF\u6210\u672C\u900F\u89C6"}),(0,t.jsxs)(x.Z,{children:[(0,t.jsx)("span",{children:"\u4F7F\u7528Mock\u6570\u636E"}),(0,t.jsx)(ve,{checked:c,onChange:s,checkedChildren:"\u662F",unCheckedChildren:"\u5426"})]})]}),f(),b(),(0,t.jsx)(C.Z,{title:"\u547D\u540D\u7A7A\u95F4\u6210\u672C\u660E\u7EC6",style:{marginTop:16},children:g?(0,t.jsxs)("div",{style:{textAlign:"center",padding:"20px"},children:[(0,t.jsx)(Z.Z,{spin:!0})," \u52A0\u8F7D\u4E2D..."]}):l?(0,t.jsx)(W.Z,{message:"\u52A0\u8F7D\u547D\u540D\u7A7A\u95F4\u6210\u672C\u5931\u8D25",description:l,type:"error",showIcon:!0}):r!=null&&r.length?(0,t.jsx)($e,{data:r,onRowClick:d}):(0,t.jsx)("div",{style:{textAlign:"center",padding:"20px"},children:"\u6682\u65E0\u547D\u540D\u7A7A\u95F4\u6570\u636E"})})]})},je=Ee}}]);
