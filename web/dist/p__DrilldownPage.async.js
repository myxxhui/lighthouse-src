"use strict";(self.webpackChunklighthouse_web=self.webpackChunklighthouse_web||[]).push([[381],{71239:function(J,y,e){var W=e(67294),j=e(29009),B=e(73604),c=e(46208),Z=e(43815),E=e(26050),a=e(85893),i=function(o){var h=o.efficiency,C=o.size,d=C===void 0?120:C,f=o.showLabel,I=f===void 0?!0:f,v=[{name:"\u6548\u7387",value:h},{name:"\u53EF\u4F18\u5316\u7A7A\u95F4",value:100-h}],t=["#52c41a","#faad14"],U=function(r){var L=r.cx,F=r.cy,T=r.midAngle,R=r.innerRadius,u=r.outerRadius,p=r.percent,x=R+(u-R)*.5,m=L+x*Math.cos(-T*(Math.PI/180)),l=F+x*Math.sin(-T*(Math.PI/180));return(0,a.jsx)("text",{x:m,y:l,fill:"white",textAnchor:"middle",dominantBaseline:"central",fontSize:14,fontWeight:"bold",children:"".concat((p*100).toFixed(0),"%")})};return(0,a.jsx)("div",{style:{width:d,height:d},children:(0,a.jsx)(j.h,{width:"100%",height:"100%",children:(0,a.jsxs)(B.u,{children:[(0,a.jsx)(c.b,{data:v,cx:"50%",cy:"50%",innerRadius:d*.3,outerRadius:d*.5,paddingAngle:2,dataKey:"value",labelLine:!1,label:I?U:void 0,children:v.map(function(w,r){return(0,a.jsx)(Z.b,{fill:t[r%t.length]},"cell-".concat(r))})}),(0,a.jsx)(E.u,{formatter:function(r){return["".concat(r,"%"),""]}})]})})})};y.Z=i},68790:function(J,y,e){var W=e(67294),j=e(55090),B=e(40411),c=e(85893),Z=function(a){var i=a.status,P=a.size,o=P===void 0?"default":P,h=a.showText,C=h===void 0?!1:h,d=function(){switch(i){case"healthy":return"#52c41a";case"warning":return"#faad14";case"critical":return"#ff4d4f";default:return"#d9d9d9"}},f=function(){switch(i){case"healthy":return"\u5065\u5EB7";case"warning":return"\u8B66\u544A";case"critical":return"\u4E25\u91CD";default:return"\u672A\u77E5"}},I=o==="small"?8:o==="large"?16:12;return(0,c.jsx)(j.Z,{title:f(),children:(0,c.jsxs)("div",{style:{display:"flex",alignItems:"center",gap:4},children:[(0,c.jsx)(B.Z,{"data-testid":"status-indicator",color:d(),style:{width:I,height:I,borderRadius:"50%"}}),C&&(0,c.jsx)("span",{children:f()})]})})};y.Z=Z},75305:function(J,y,e){e.r(y),e.d(y,{default:function(){return T}});var W=e(5574),j=e.n(W),B=e(67294),c=e(74330),Z=e(68753),E=e(11189),a=e(4393),i=e(26412),P=e(98081),o=e(50888),h=e(20057),C=e(13854),d=e(85673),f=e(82826),I=e(73403),v=e(12021),t=e(85893),U=function(u){var p=u.onBack,x=u.onHome,m=(0,v.q)(),l=m.drilldownPath,n=m.clearDrilldownPath,H=function(){p?p():l.length>0&&n()},S=function(){x?x():n()},O=l.map(function(A,g){var D=A.split(":"),z=j()(D,2),M=z[0],b=z[1],K=M==="namespace"?"\u547D\u540D\u7A7A\u95F4":M==="node"?"\u8282\u70B9":M==="workload"?"\u5DE5\u4F5C\u8D1F\u8F7D":"Pod";return{title:"".concat(K,": ").concat(b),key:g}});return(0,t.jsxs)(P.Z,{size:"middle",style:{marginBottom:16},children:[(0,t.jsx)(E.ZP,{icon:(0,t.jsx)(f.Z,{}),onClick:H,disabled:l.length===0,children:"\u8FD4\u56DE"}),(0,t.jsx)(E.ZP,{icon:(0,t.jsx)(I.Z,{}),onClick:S,children:"\u9996\u9875"}),l.length>0&&(0,t.jsx)(d.Z,{items:O})]})},w=U,r=e(71239),L=e(68790),F=function(){var u=(0,h.s0)(),p=(0,C.lr)(),x=j()(p,1),m=x[0],l=(0,v.q)(),n=l.currentDrilldownItem,H=l.loadingDrilldown,S=l.errorDrilldown,O=l.fetchDrilldownData,A=l.clearDrilldownPath,g=m.get("type"),D=m.get("id");(0,B.useEffect)(function(){return g&&D&&O(g,D),function(){A()}},[g,D,O,A]);var z=function(){u(-1)},M=function(){u("/")},b=function(){if(H)return(0,t.jsxs)("div",{style:{textAlign:"center",padding:"40px"},children:[(0,t.jsx)(c.Z,{indicator:(0,t.jsx)(o.Z,{spin:!0})}),(0,t.jsx)("p",{children:"\u52A0\u8F7D\u4E2D..."})]});if(S)return(0,t.jsx)(Z.Z,{message:"\u52A0\u8F7D\u94BB\u53D6\u6570\u636E\u5931\u8D25",description:S,type:"error",showIcon:!0,action:(0,t.jsx)(E.ZP,{type:"primary",onClick:function(){return g&&D&&O(g,D)},children:"\u91CD\u8BD5"})});if(!n)return(0,t.jsx)("div",{style:{textAlign:"center",padding:"40px"},children:(0,t.jsx)("p",{children:"\u6682\u65E0\u6570\u636E"})});var N=function(G){switch(G){case"namespace":return"\u547D\u540D\u7A7A\u95F4";case"node":return"\u8282\u70B9";case"workload":return"\u5DE5\u4F5C\u8D1F\u8F7D";case"pod":return"Pod";default:return G}},$="healthy";return n.efficiency<50?$="critical":n.efficiency<70&&($="warning"),(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(a.Z,{title:"".concat(N(n.type),": ").concat(n.name),children:(0,t.jsxs)(i.Z,{column:{xs:1,sm:2,md:3},bordered:!0,children:[(0,t.jsx)(i.Z.Item,{label:"ID",children:n.id}),(0,t.jsx)(i.Z.Item,{label:"\u7C7B\u578B",children:N(n.type)}),(0,t.jsx)(i.Z.Item,{label:"\u6210\u672C (\xA5)",children:n.cost.toLocaleString()}),(0,t.jsx)(i.Z.Item,{label:"\u53EF\u4F18\u5316\u7A7A\u95F4 (\xA5)",children:n.optimizableSpace.toLocaleString()}),(0,t.jsx)(i.Z.Item,{label:"\u6548\u7387\u5206",children:(0,t.jsxs)(P.Z,{children:[(0,t.jsx)(r.Z,{efficiency:n.efficiency,size:40,showLabel:!1}),(0,t.jsxs)("span",{children:[n.efficiency,"%"]})]})}),(0,t.jsx)(i.Z.Item,{label:"\u5065\u5EB7\u72B6\u6001",children:(0,t.jsx)(L.Z,{status:$,showText:!0})})]})}),n.children&&n.children.length>0&&(0,t.jsx)(a.Z,{title:"\u5B50\u8D44\u6E90",style:{marginTop:16},children:n.children.map(function(s){return(0,t.jsx)(a.Z,{style:{marginBottom:8},hoverable:!0,onClick:function(){u("/DrilldownPage?type=".concat(s.type,"&id=").concat(s.id))},children:(0,t.jsxs)("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center"},children:[(0,t.jsxs)("div",{children:[(0,t.jsxs)("strong",{children:[N(s.type),": ",s.name]}),(0,t.jsxs)("div",{style:{fontSize:"12px",color:"#666"},children:["\u6210\u672C: \xA5",s.cost.toLocaleString()," | \u6548\u7387: ",s.efficiency,"%"]})]}),(0,t.jsx)("div",{children:(0,t.jsx)(L.Z,{status:s.efficiency<50?"critical":s.efficiency<70?"warning":"healthy"})})]})},s.id)})})]})};return(0,t.jsxs)("div",{children:[(0,t.jsx)(w,{onBack:z,onHome:M}),b()]})},T=F}}]);
