"use strict";
import { jsx, jsxs } from "react/jsx-runtime";
import {
  LineChart,
  Line,
  XAxis,
  YAxis,
  CartesianGrid,
  Tooltip,
  ResponsiveContainer,
  Legend
} from "recharts";
const TrendChart = ({ data, height = 300, showEfficiency = true }) => {
  const formatXAxis = (tickItem) => {
    const date = new Date(tickItem);
    return date.toLocaleDateString("zh-CN", { month: "short", day: "numeric" });
  };
  const CustomTooltip = ({ active, payload }) => {
    if (active && payload && payload.length) {
      const data2 = payload[0].payload;
      return /* @__PURE__ */ jsxs(
        "div",
        {
          style: {
            backgroundColor: "white",
            padding: "10px",
            border: "1px solid #ccc",
            borderRadius: "4px"
          },
          children: [
            /* @__PURE__ */ jsx("p", { children: /* @__PURE__ */ jsxs("strong", { children: [
              "\u65E5\u671F: ",
              data2.date
            ] }) }),
            /* @__PURE__ */ jsxs("p", { children: [
              "\u4EF7\u503C: \xA5",
              data2.value.toLocaleString()
            ] }),
            /* @__PURE__ */ jsxs("p", { children: [
              "\u6210\u672C: \xA5",
              data2.cost.toLocaleString()
            ] }),
            showEfficiency && /* @__PURE__ */ jsxs("p", { children: [
              "\u6548\u7387: ",
              data2.efficiency,
              "%"
            ] })
          ]
        }
      );
    }
    return null;
  };
  return /* @__PURE__ */ jsx("div", { style: { width: "100%", height }, children: /* @__PURE__ */ jsx(ResponsiveContainer, { width: "100%", height: "100%", children: /* @__PURE__ */ jsxs(LineChart, { data, margin: { top: 5, right: 30, left: 20, bottom: 5 }, children: [
    /* @__PURE__ */ jsx(CartesianGrid, { strokeDasharray: "3 3" }),
    /* @__PURE__ */ jsx(
      XAxis,
      {
        dataKey: "date",
        tickFormatter: formatXAxis,
        angle: -45,
        textAnchor: "end",
        height: 60
      }
    ),
    /* @__PURE__ */ jsx(YAxis, { yAxisId: "left", tickFormatter: (value) => `\xA5${value.toLocaleString()}` }),
    showEfficiency && /* @__PURE__ */ jsx(
      YAxis,
      {
        yAxisId: "right",
        orientation: "right",
        domain: [0, 100],
        tickFormatter: (value) => `${value}%`
      }
    ),
    /* @__PURE__ */ jsx(Tooltip, { content: /* @__PURE__ */ jsx(CustomTooltip, {}) }),
    /* @__PURE__ */ jsx(Legend, {}),
    /* @__PURE__ */ jsx(
      Line,
      {
        yAxisId: "left",
        type: "monotone",
        dataKey: "value",
        name: "\u4EF7\u503C",
        stroke: "#52c41a",
        strokeWidth: 2,
        dot: { r: 4 },
        activeDot: { r: 6 }
      }
    ),
    /* @__PURE__ */ jsx(
      Line,
      {
        yAxisId: "left",
        type: "monotone",
        dataKey: "cost",
        name: "\u6210\u672C",
        stroke: "#faad14",
        strokeWidth: 2,
        dot: { r: 4 },
        activeDot: { r: 6 }
      }
    ),
    showEfficiency && /* @__PURE__ */ jsx(
      Line,
      {
        yAxisId: "right",
        type: "monotone",
        dataKey: "efficiency",
        name: "\u6548\u7387",
        stroke: "#1890ff",
        strokeWidth: 2,
        dot: { r: 4 },
        activeDot: { r: 6 }
      }
    )
  ] }) }) });
};
export default TrendChart;
