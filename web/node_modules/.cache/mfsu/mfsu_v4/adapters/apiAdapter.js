"use strict";
export function adaptGlobalCostToCostMetrics(res) {
  const totalOptimizable = res.total_optimizable ?? res.total_cost * 0.3;
  const globalEfficiency = res.global_efficiency ?? 70;
  const totalCost = res.total_cost || 1;
  const domainBreakdown = res.domain_breakdown?.map((d) => ({
    domain: d.domain,
    cost: d.cost,
    optimizableSpace: d.optimizable_space,
    efficiency: d.efficiency
  })) ?? res.namespaces.map((n) => ({
    domain: n.name,
    cost: n.cost,
    optimizableSpace: totalOptimizable * (n.cost / totalCost) || 0,
    efficiency: gradeToEfficiency(n.grade ?? "Healthy")
  }));
  return {
    totalBillableCost: res.total_cost,
    totalOptimizableSpace: totalOptimizable,
    globalEfficiency,
    domainBreakdown
  };
}
export function adaptNamespacesToNamespaceCosts(items) {
  return items.map((n) => {
    const efficiency = gradeToEfficiency(n.grade ?? "Healthy");
    const optimizableRatio = 1 - efficiency / 100;
    return {
      namespace: n.name,
      cost: n.cost,
      optimizableSpace: n.cost * optimizableRatio || 0,
      efficiency,
      resourceUsage: { cpu: 0, memory: 0, storage: 0 },
      recommendations: []
    };
  });
}
function gradeToEfficiency(grade) {
  switch (grade) {
    case "Zombie":
      return 10;
    case "OverProvisioned":
      return 40;
    case "Healthy":
      return 70;
    case "Risk":
      return 90;
    default:
      return 70;
  }
}
